/*! fontmarklet - v0.4.0 - 2013-11-07 */!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c={},d=function(){};d.prototype.on=function(a,b){c[a]?c[a].push(b):c[a]=[b]},d.prototype.emit=function(a){var b,d=c[a];for(b=0;b<d.length;b++)d[b]()},b.exports=d},{}],2:[function(a){!function(b){function c(){console.log("Starting up the bookmarklet!");var b=a("./ui"),c=a("./controller"),d=a("./localstorage"),e=a("./webfonts");e.providers={google:a("./providers/google"),local:a("./providers/local")},b.init(c,e.providers),e.loadRequirements(function(){e.setActiveProvider("google"),d.load()})}var d,e="1.8.3",f=!1;void 0===b.jQuery||b.jQuery.fn.jquery<e?(d=document.createElement("script"),d.src="https://ajax.googleapis.com/ajax/libs/jquery/"+e+"/jquery.min.js",d.onload=d.onreadystatechange=function(){f||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(f=!0,c())},document.getElementsByTagName("head")[0].appendChild(d)):c()}(window)},{"./controller":3,"./localstorage":4,"./providers/google":5,"./providers/local":6,"./ui":8,"./webfonts":11}],3:[function(a,b){var c=a("./Obsv"),d=a("./ui"),e=a("./localstorage"),f=a("./styles"),g=a("./webfonts"),h=new c;h.addButtonClick=function(){var a=d.addSelectorRow(g.addFontConfig());$(a).click()},h.deleteButtonClick=function(a,b){$(b).remove(),g.applyFont(a,!0),g.deleteFontConfig(a),e.save()},h.selectButtonClick=function(a){d.selectElement(function(b){g.applyFont(a,!0),$(this).css(f.selectButton_selected),g.fontConfigs[a].selector=b,g.applyFont(a),e.save()})},h.selectorInputChange=function(a,b,c){g.applyFont(a,!0),$(b).css(f.selectButton),g.fontConfigs[a].selector=c,g.applyFont(a),e.save()},h.selectorDivClick=function(a,b){$(b).css(f.selectorDiv_selected),$(b).siblings("div").css(f.selectorDiv),g.setActiveConfig(a),g.fontConfigs[a].provider.ui.update(g.fontConfigs[a])},h.activeCheckClick=function(a,b){g.fontConfigs[a].active=b.checked,g.applyFont(a)},h.fontProviderSelectChange=function(a){g.setActiveProvider(a);var b,c,d=g.getActiveConfig();if(d){var f=g.getActiveProvider();b=d.id,c=d.selector,g.fontConfigs[b]=new f.FontConfiguration(b),g.fontConfigs[b].selector=c,g.fontConfigs[b].load(function(){g.applyFont(b)}),e.save()}},b.exports=h},{"./Obsv":1,"./localstorage":4,"./styles":7,"./ui":8,"./webfonts":11}],4:[function(a,b){var c={},d=a("./webfonts");c.save=function(){var a,b=[];for(a in d.fontConfigs)d.fontConfigs.hasOwnProperty(a)&&d.fontConfigs[a]&&b.push(d.fontConfigs[a].provider.pack(d.fontConfigs[a]));localStorage.fontmarkletFontConfigs=JSON.stringify(b)},c.load=function(){var b,c,e,f=a("./ui");if(localStorage.fontmarkletFontConfigs){e=JSON.parse(localStorage.fontmarkletFontConfigs);for(b in e)e.hasOwnProperty(b)&&(c=d.providers[e[b].provider].unpack(e[b]),f.addSelectorRow(c),d.idCounter++,d.fontConfigs[c.id]=c,c.provider.ui.update(c),c.load(function(a){return function(){a.applyFont()}}(c)))}},b.exports=c},{"./ui":8,"./webfonts":11}],5:[function(a,b){function c(a){switch(a){case"regular":return"normal";case"italic":return 400;default:return parseInt(a,10)}}function d(a){return-1!==a.indexOf("regular")?"normal":-1!==a.indexOf("italic")?"italic":"normal"}var e,f,g,h,i,j,k={},l=a("../styles"),m=a("../webfonts"),n=a("../localstorage");k.name="google",k.pack=function(a){var b=$.extend({},a);return b.provider=k.name,b.selector=a.selector.nodeName||a.selector,b},k.unpack=function(a){var b=new k.FontConfiguration(a.id);return b.provider=m.providers[a.provider],b.selector=a.selector,b.family=a.family,b.variant=a.variant,b.size=a.size,b.weight=a.weight,b.active=a.active,b},k.FontConfiguration=function(a){this.id=a,this.provider=k,this.selector="",this.family=e[$(g).val()].family,this.variant=$(j).val(),this.size=h.value,this.weight=c($(j).val()),this.subset=$(i).val(),this.active=!0,this.applyFont=function(){return m.applyFont(this.id)},this.load=function(a){this.family&&window.WebFont.load({google:{families:[this.family+":"+(this.variant||"")+":"+(this.subset||"")]},active:a})},this.css=function(){return{"font-family":this.family||"","font-size":this.size||"","font-weight":this.weight||"","font-style":this.style||""}},this.reset=function(){return{"font-family":"","font-size":"","font-weight":"","font-style":""}}},k.ui=function(){var a={};return a.show=function(){$(f).show()},a.hide=function(){$(f).hide()},a.init=function(){f=document.createElement("div"),g=document.createElement("select"),$(g).attr("class","selectFont").css(l.fontNameSelect).change(function(){var b=$(this).val();a.updateSubsets(e[b].subsets),a.updateVariants(e[b].variants),m.getActiveConfig()&&(m.getActiveConfig().family=e[b].family,m.getActiveConfig().variant="",m.getActiveConfig().weight="",m.getActiveConfig().load(function(){m.getActiveConfig().applyFont()}),n.save())}),f.appendChild(g),i=document.createElement("select"),$(i).attr("class","subset").css(l.subsetSelect).change(function(){m.getActiveConfig()&&(m.getActiveConfig().subset=this.value),m.getActiveConfig().load(function(){m.getActiveConfig().applyFont()}),n.save()}),f.appendChild(i),j=document.createElement("select"),$(j).attr("class","variant").css(l.variantSelect).change(function(){m.getActiveConfig()&&(m.getActiveConfig().variant=this.value,m.getActiveConfig().weight=c(this.value),m.getActiveConfig().style=d(this.value)),m.getActiveConfig().load(function(){m.getActiveConfig().applyFont()}),n.save()}),f.appendChild(j),h=document.createElement("input"),$(h).attr("class","fontSize").css(l.sizeInput).attr("placeholder","Font size").change(function(){m.getActiveConfig().size=this.value,m.getActiveConfig().applyFont()}),f.appendChild(h);var b,o,p=e.length;for(b=0;p>b;b++)o=document.createElement("option"),o.innerHTML=e[b].family,o.title=e[b].family,o.value=b,g.appendChild(o);return a.updateSubsets(e[0].subsets),a.updateVariants(e[0].variants),new k.FontConfiguration(-1).load(),f},a.updateSubsets=function(a){var b,c,d=a.length;for($(i).empty(),b=0;d>b;b++)c=document.createElement("option"),c.innerHTML=a[b],c.value=a[b],i.appendChild(c);m.getActiveConfig()&&(m.getActiveConfig().subset=a[0])},a.updateVariants=function(a){var b,e,f=a.length;for($(j).empty(),b=0;f>b;b++)e=document.createElement("option"),e.innerHTML=a[b],e.value=a[b],j.appendChild(e);m.getActiveConfig()&&(m.getActiveConfig().weight=c(a[0]),m.getActiveConfig().style=d(a[0]))},a.update=function(b){$(g).children("option[title='"+b.family+"']").prop("selected",!0),a.updateSubsets(e[$(g).val()].subsets),a.updateVariants(e[$(g).val()].variants),$(i).children("option[value='"+b.subset+"']").prop("selected",!0),$(j).children("option[value='"+b.variant+"']").prop("selected",!0)},a}(),k.loadRequirements=function(a){var b,c=document.createElement("script");c.src=("https:"===document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",c.type="text/javascript",c.async="true",c.onload=function(){$.getJSON("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBRh3XwaTyAoCjBuAFQ6syYtRjRRdeJb4o&callback=?",function(b){e=b.items,a(k)})},b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(c,b)},b.exports=k},{"../localstorage":4,"../styles":7,"../webfonts":11}],6:[function(a,b){var c,d,e,f,g={},h=a("../styles"),i=a("../webfonts");g.name="local",g.pack=function(a){var b=$.extend({},a);return b.provider=g.name,b.selector=a.selector.nodeName||a.selector,b},g.unpack=function(a){var b=new g.FontConfiguration(a.id);return b.provider=i.providers[a.provider],b.selector=a.selector,b.family=a.family,b.size=a.size,b.active=a.active,b},g.FontConfiguration=function(a){this.id=a,this.provider=g,this.selector="",this.family=c[$(e).val()],this.size=f.value,this.active=!0,this.applyFont=function(){return i.applyFont(this.id)},this.load=function(a){a()},this.css=function(){return{"font-family":this.family||"","font-size":this.size||""}},this.reset=function(){return{"font-family":"","font-size":""}}},g.ui=function(){var a={};return a.show=function(){$(d).show()},a.hide=function(){$(d).hide()},a.init=function(){return d=document.createElement("div"),e=document.createElement("select"),$(e).attr("class","selectFont").css(h.fontNameSelect).change(function(){var a=$(this).val();i.getActiveConfig()&&(i.getActiveConfig().family=c[a]),i.getActiveConfig().applyFont()}),d.appendChild(e),f=document.createElement("input"),$(f).attr("class","fontSize").css(h.sizeInput).attr("placeholder","Font size in px").change(function(){i.getActiveConfig().size=this.value,i.getActiveConfig().applyFont()}),d.appendChild(f),d},a.el=d,a.update=function(a){$(e).children("option[title='"+a.family+"']").prop("selected",!0)},a}(),g.loadRequirements=function(a){window.populateFontList=function(a){c=a;var b,d,f=c.length;for(b=0;f>b;b++)d=document.createElement("option"),d.innerHTML=c[b],d.title=c[b],d.value=b,e.appendChild(d)};var b=document.createElement("embed");b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("type","application/x-shockwave-flash"),b.setAttribute("allowscriptaccess","always"),b.setAttribute("src","https://ssl.kundenserver.de/johann-hofmann.com/fontmarklet/FontList.swf"),document.body.appendChild(b),a(g)},b.exports=g},{"../styles":7,"../webfonts":11}],7:[function(a,b){b.exports={mainContainer:{width:"500px","min-height":"150px","background-color":"rgba(250,250,250,0.7)",position:"fixed",zIndex:"999",border:"3px solid rgba(200,200,200,0.2)",overflow:"visible"},selectorContainer:{width:"300px","min-height":"150px","float":"left",overflow:"auto","border-right":"3px solid rgba(200,200,200,0.2)"},selectedElement:{border:"3px dotted grey","-webkit-transition":"all 0.2s","-moz-transition":"all 0.2s","-o-transition":"all 0.2s",transition:"all 0.2s ease-in-out"},unselectedElement:{border:"","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""},rightContainer:{padding:"10px","text-align":"center"},selectorDiv:{borderTop:"2px solid rgba(200,200,200,0.0)",borderBottom:"2px solid rgba(200,200,200,0.0)",height:"30px","background-color":"rgba(200,200,200,0.2)",cursor:"pointer"},selectorDiv_selected:{"background-color":"rgb(37,141,200)"},addButton:{background:"rgb(143,200,0)",width:"100%",height:"30px",border:"none",cursor:"pointer",color:"white"},selectButton:{background:"rgb(140,180,200)",width:"24%",marginLeft:"10%",marginRight:"0%",height:"100%",cursor:"pointer",border:"none",color:"white"},selectButton_selected:{border:"1px solid rgb(143,200,0)"},selectorInput:{border:"none",marginRight:"0%",padding:"0",paddingLeft:"2%","outline-width":0,height:"100%",width:"40%"},deleteButton:{background:"rgb(200,73,20)",height:"100%",cursor:"pointer",width:"18%",border:"none",color:"white"},subsetSelect:{width:"100px"},variantSelect:{width:"100px"},sizeInput:{width:"100px"},fontNameSelect:{width:"150px"},fontProviderSelect:{width:"150px"}}},{}],8:[function(a,b){var c,d,e,f,g,h={},i=a("./views/selectorRow"),j=a("./styles"),k=a("./vendor/draggable");h.providerContainer=document.createElement("div"),h.selectElement=function(a){var b=$("body *").not("#fontmarkletDiv *").not("#fontmarkletDiv");b.on("mouseover.fontmarklet",function(c){c.stopPropagation(),$(this).css(j.selectedElement),$(this).on("click.fontmarklet",function(c){c.preventDefault(),$(this).css(j.unselectedElement),b.off("click.fontmarklet"),b.off("mouseover.fontmarklet"),b.off("mouseout.fontmarklet"),a(this)})}),b.on("mouseout.fontmarklet",function(a){a.stopPropagation(),$(this).css(j.unselectedElement),$(this).off("click.fontmarklet")})},h.addSelectorRow=function(a){d.append(i(a))},h.init=function(a,b){var i,l;c=$(document.createElement("div")),c.attr("id","fontmarkletDiv").css(j.mainContainer),d=$(document.createElement("div")),d.css(j.selectorContainer),f=$(document.createElement("button")),f.attr("id","addFont").html("Add Selector").css(j.addButton).click(a.addButtonClick),d.append(f),d.append(document.createElement("br")),e=$(document.createElement("div")),e.css(j.rightContainer),g=$(document.createElement("select")),g.attr("class","selectProvider").css(j.fontProviderSelect).change(function(){a.fontProviderSelectChange($(this).val())});for(i in b)b.hasOwnProperty(i)&&(l=document.createElement("option"),l.value=i,l.innerHTML=i,g.append(l));e.append(g),e.append(h.providerContainer),k(c),c.append(d),c.append(e),document.body.insertBefore(c.get(0),document.body.firstChild)},b.exports=h},{"./styles":7,"./vendor/draggable":9,"./views/selectorRow":10}],9:[function(a,b){b.exports=function(a){!function(a){a.fn.drags=function(b){var c;return b=a.extend({handle:"",cursor:"move"},b),c=""===b.handle?this:this.find(b.handle),c.css("cursor",b.cursor).on("mousedown",function(c){var d,e,f,g,h,i;d=""===b.handle?a(this).addClass("draggable"):a(this).addClass("active-handle").parent().addClass("draggable"),e=d.css("z-index"),f=d.outerHeight(),g=d.outerWidth(),h=d.offset().top+f-c.pageY,i=d.offset().left+g-c.pageX,d.css("z-index",1e3).parents().on("mousemove",function(b){a(".draggable").offset({top:b.pageY+h-f,left:b.pageX+i-g}).on("mouseup",function(){a(this).removeClass("draggable").css("z-index",e)})})}).on("mouseup",function(){""===b.handle?a(this).removeClass("draggable"):a(this).removeClass("active-handle").parent().removeClass("draggable")})}}(window.$),a.drags()}},{}],10:[function(a,b){var c=a("../styles");b.exports=function(b){var d=document.createElement("div"),e=document.createElement("input"),f=document.createElement("input"),g=document.createElement("button"),h=document.createElement("button"),i=b.id;return $(d).attr("id",i+"_selectorDiv").css(c.selectorDiv).click(function(){var b=a("../controller");b.selectorDivClick(i,d)}),$(e).attr("type","checkbox").attr("checked","true").click(function(){var b=a("../controller");b.activeCheckClick(i,e)}),d.appendChild(e),$(h).html("Select").css(c.selectButton).click(function(){var b=a("../controller");b.selectButtonClick(i)}),d.appendChild(h),$(f).attr("id",i+"_selector").attr("class","selector").css(c.selectorInput).attr("placeholder","jQuery Selector").val(b.selector||"").on("keyup change",function(){var b=a("../controller");b.selectorInputChange(i,h,this.value)}),d.appendChild(f),$(g).html("Delete").css(c.deleteButton).click(function(){var b=a("../controller");b.deleteButtonClick(i,d)}),d.appendChild(g),d}},{"../controller":3,"../styles":7}],11:[function(a,b){var c,d,e={};e.providers={},e.fontConfigs={},e.idCounter=Math.round(1e5*Math.random()),e.loadRequirements=function(b){function c(a){f.providerContainer.appendChild(a.ui.init()),a.ui.hide(),0===--g&&b()}var d,f=a("./ui"),g=0;for(d in e.providers)e.providers.hasOwnProperty(d)&&e.providers[d].loadRequirements&&(g++,e.providers[d].loadRequirements(c))},e.loadWebFont=function(a,b){a.provider.loadWebFont(a,b)},e.setActiveProvider=function(a){d&&d.ui.hide(),d=e.providers[a],d.ui.show()},e.applyFont=function(a,b){try{var c=e.fontConfigs[a],d=$(c.selector).not("#fontmarkletDiv *");c.active&&!b?$(d).css(c.css()):$(d).css(c.reset())}catch(f){console.log("Fontmarklet: Invalid jQuery Selector")}},e.getActiveProvider=function(){return d},e.setActiveConfig=function(a){c=e.fontConfigs[a]},e.getActiveConfig=function(){return c},e.addFontConfig=function(){var a=e.idCounter++;return e.fontConfigs[a]=new d.FontConfiguration(a),e.setActiveConfig(a),e.fontConfigs[a]},e.deleteFontConfig=function(a){c&&c.id===a&&(c=null),e.fontConfigs[a]=void 0},b.exports=e},{"./ui":8}]},{},[1,2,3,4,5,6,7,8,9,10,11]);