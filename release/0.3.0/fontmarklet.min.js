/*! fontmarklet - v0.3.0 - 2013-10-16 */!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){!function(b){function c(){var c=(b.jQuery,a("./ui")),d=a("./localstorage"),e=a("./webfonts");e.providers={google:a("./providers/google"),local:a("./providers/local")},c.init(),e.loadRequirements(function(){e.setActiveProvider("google"),d.load()})}var d,e="1.8.3",f=!1;void 0===b.jQuery||b.jQuery.fn.jquery<e?(d=document.createElement("script"),d.src="https://ajax.googleapis.com/ajax/libs/jquery/"+e+"/jquery.min.js",d.onload=d.onreadystatechange=function(){f||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(f=!0,c())},document.getElementsByTagName("head")[0].appendChild(d)):c()}(window)},{"./localstorage":3,"./providers/google":4,"./providers/local":5,"./ui":7,"./webfonts":8}],2:[function(a,b){var c={},d=a("./localstorage"),e=a("./styles"),f=a("./webfonts");c.addButtonClick=function(){var b=a("./ui"),c=b.createSelectorRow(f.addFontConfig());$(c).click()},c.deleteButtonClick=function(a,b){$(b).remove(),f.fontConfigs[a].reset(),f.deleteFontConfig(a),d.save()},c.selectButtonClick=function(b){var c=a("./ui");c.selectElement(function(a){f.fontConfigs[b].reset(),$(this).css(e.selectButton_selected),f.fontConfigs[b].selector=a,f.fontConfigs[b].applyFont(),d.save()})},c.selectorInputChange=function(a,b,c){f.fontConfigs[a].reset(),$(b).css(e.selectButton),f.fontConfigs[a].selector=c,f.fontConfigs[a].applyFont(),d.save()},c.selectorDivClick=function(a,b){$(b).css(e.selectorDiv_selected),$(b).siblings("div").css(e.selectorDiv),f.setActiveConfig(a),f.fontConfigs[a].provider.ui.update(f.fontConfigs[a])},c.activeCheckClick=function(a,b){f.fontConfigs[a].active=b.checked,f.fontConfigs[a].reset(),f.fontConfigs[a].applyFont()},c.fontProviderSelectChange=function(a){f.setActiveProvider(a);var b,c,e=f.getActiveConfig();if(e){var g=f.getActiveProvider();b=e.id,c=e.selector,f.fontConfigs[b]=new g.FontConfiguration(b),f.fontConfigs[b].selector=c,f.fontConfigs[b].load(function(){f.fontConfigs[b].applyFont()}),d.save()}},b.exports=c},{"./localstorage":3,"./styles":6,"./ui":7,"./webfonts":8}],3:[function(a,b){var c={},d=a("./webfonts");c.save=function(){var a,b=[];for(a in d.fontConfigs)d.fontConfigs.hasOwnProperty(a)&&d.fontConfigs[a]&&b.push(d.fontConfigs[a].provider.pack(d.fontConfigs[a]));localStorage.fontmarkletFontConfigs=JSON.stringify(b)},c.load=function(){var b,c,e,f=a("./ui");if(localStorage.fontmarkletFontConfigs){e=JSON.parse(localStorage.fontmarkletFontConfigs);for(b in e)e.hasOwnProperty(b)&&(c=d.providers[e[b].provider].unpack(e[b]),f.createSelectorRow(c),d.idCounter++,d.fontConfigs[c.id]=c,c.provider.ui.update(c),c.load(function(a){return function(){a.applyFont()}}(c)))}},b.exports=c},{"./ui":7,"./webfonts":8}],4:[function(a,b){function c(a){switch(a){case"regular":return"normal";case"italic":return 400;default:return parseInt(a,10)}}function d(a){return-1!==a.indexOf("regular")?"normal":-1!==a.indexOf("italic")?"italic":"normal"}var e,f,g,h,i,j,k={},l=a("../styles"),m=a("../webfonts"),n=a("../localstorage"),o=a("../ui");k.name="google",k.pack=function(a){var b=$.extend({},a);return b.provider=k.name,b.selector=a.selector.nodeName||a.selector,b},k.unpack=function(a){var b=new k.FontConfiguration(a.id);return b.provider=m.providers[a.provider],b.selector=a.selector,b.family=a.family,b.variant=a.variant,b.size=a.size,b.weight=a.weight,b.active=a.active,b},k.FontConfiguration=function(a){this.id=a,this.provider=k,this.selector="",this.family=e[$(g).val()].family,this.variant=$(j).val(),this.size=h.value,this.weight=c($(j).val()),this.subset=$(i).val(),this.active=!0,this.applyFont=function(){if(this.active){var a=$(this.selector).not("#fontmarkletDiv *");a.css("font-family",this.family),this.size&&a.css("font-size",this.size),this.weight&&a.css("font-weight",this.weight),this.style&&a.css("font-style",this.style)}},this.load=function(a){this.family&&WebFont.load({google:{families:[this.family+":"+(this.variant||"")+":"+(this.subset||"")]},active:a})},this.reset=function(){$(this.selector).css("font-family",""),$(this.selector).css("font-size",""),$(this.selector).css("font-weight",""),$(this.selector).css("font-style","")}},k.ui=function(){var a={};return a.show=function(){$(f).show()},a.hide=function(){$(f).hide()},a.init=function(){f=document.createElement("div"),g=document.createElement("select"),$(g).attr("class","selectFont").css(l.fontNameSelect).change(function(){var b=$(this).val();a.updateSubsets(e[b].subsets),a.updateVariants(e[b].variants),m.getActiveConfig()&&(m.getActiveConfig().family=e[b].family),m.getActiveConfig().load(function(){m.getActiveConfig().applyFont()}),n.save()}),f.appendChild(g),i=document.createElement("select"),$(i).attr("class","subset").css(l.subsetSelect).change(function(){m.getActiveConfig()&&(m.getActiveConfig().subset=this.value),m.getActiveConfig().load(function(){m.getActiveConfig().applyFont()}),n.save()}),f.appendChild(i),j=document.createElement("select"),$(j).attr("class","variant").css(l.variantSelect).change(function(){m.getActiveConfig()&&(m.getActiveConfig().variant=this.value,m.getActiveConfig().weight=c(this.value),m.getActiveConfig().style=d(this.value)),m.getActiveConfig().load(function(){m.getActiveConfig().applyFont()}),n.save()}),f.appendChild(j),h=document.createElement("input"),$(h).attr("class","fontSize").css(l.sizeInput).attr("placeholder","Font size").change(function(){m.getActiveConfig().size=this.value,m.getActiveConfig().applyFont()}),f.appendChild(h),o.providerContainer.appendChild(f);var b,p,q=e.length;for(b=0;q>b;b++)p=document.createElement("option"),p.innerHTML=e[b].family,p.title=e[b].family,p.value=b,g.appendChild(p);a.updateSubsets(e[0].subsets),a.updateVariants(e[0].variants),new k.FontConfiguration(-1).load()},a.updateSubsets=function(a){var b,c,d=a.length;for($(i).empty(),b=0;d>b;b++)c=document.createElement("option"),c.innerHTML=a[b],c.value=a[b],i.appendChild(c);m.getActiveConfig()&&(m.getActiveConfig().subset=a[0])},a.updateVariants=function(a){var b,e,f=a.length;for($(j).empty(),b=0;f>b;b++)e=document.createElement("option"),e.innerHTML=a[b],e.value=a[b],j.appendChild(e);m.getActiveConfig()&&(m.getActiveConfig().weight=c(a[0]),m.getActiveConfig().style=d(a[0]))},a.update=function(b){$(g).children("option[title='"+b.family+"']").prop("selected",!0),a.updateSubsets(e[$(g).val()].subsets),a.updateVariants(e[$(g).val()].variants),$(i).children("option[value='"+b.subset+"']").prop("selected",!0),$(j).children("option[value='"+b.variant+"']").prop("selected",!0)},a}(),k.loadRequirements=function(a){var b,c=document.createElement("script");c.src=("https:"===document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",c.type="text/javascript",c.async="true",c.onload=function(){$.getJSON("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBRh3XwaTyAoCjBuAFQ6syYtRjRRdeJb4o&callback=?",function(b){e=b.items,a(k)})},b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(c,b)},b.exports=k},{"../localstorage":3,"../styles":6,"../ui":7,"../webfonts":8}],5:[function(a,b){var c,d,e,f,g={},h=a("../styles"),i=a("../ui");g.name="local",g.pack=function(a){var b=$.extend({},a);return b.provider=g.name,b.selector=a.selector.nodeName||a.selector,b},g.unpack=function(a){var b=new g.FontConfiguration(a.id);return b.provider=webfonts.providers[a.provider],b.selector=a.selector,b.family=a.family,b.size=a.size,b.active=a.active,b},g.FontConfiguration=function(a){this.id=a,this.provider=g,this.selector="",this.family=c[$(e).val()],this.size=f.value,this.active=!0,this.applyFont=function(){if(this.active){var a=$(this.selector).not("#fontmarkletDiv *");a.css("font-family",this.family),this.size&&a.css("font-size",this.size)}},this.load=function(a){a()},this.reset=function(){$(this.selector).css("font-family",""),$(this.selector).css("font-size","")}},g.ui=function(){var a={};return a.show=function(){$(d).show()},a.hide=function(){$(d).hide()},a.init=function(){d=document.createElement("div"),e=document.createElement("select"),$(e).attr("class","selectFont").css(h.fontNameSelect).change(function(){var a=$(this).val();webfonts.getActiveConfig()&&(webfonts.getActiveConfig().family=c[a]),webfonts.getActiveConfig().applyFont()}),d.appendChild(e),f=document.createElement("input"),$(f).attr("class","fontSize").css(h.sizeInput).attr("placeholder","Font size in px").change(function(){webfonts.getActiveConfig().size=this.value,webfonts.getActiveConfig().applyFont()}),d.appendChild(f),i.providerContainer.appendChild(d)},a.update=function(a){$(e).children("option[title='"+a.family+"']").prop("selected",!0)},a}(),g.loadRequirements=function(a){window.populateFontList=function(a){c=a;var b,d,f=c.length;for(b=0;f>b;b++)d=document.createElement("option"),d.innerHTML=c[b],d.title=c[b],d.value=b,e.appendChild(d)};var b=document.createElement("embed");b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("type","application/x-shockwave-flash"),b.setAttribute("allowscriptaccess","always"),b.setAttribute("src","https://ssl.kundenserver.de/johann-hofmann.com/fontmarklet/FontList.swf"),document.body.appendChild(b),a(g)},b.exports=g},{"../styles":6,"../ui":7}],6:[function(a,b){b.exports={mainContainer:{width:"500px","min-height":"150px","background-color":"rgba(200,200,200,0.3)",position:"fixed",zIndex:"999","box-shadow":"1px 1px 5px grey",overflow:"visible"},leftContainer:{width:"300px","min-height":"150px","float":"left",overflow:"auto","border-right":"1px solid lightgray"},selectedElement:{border:"3px dotted grey","-webkit-transition":"all 0.2s","-moz-transition":"all 0.2s","-o-transition":"all 0.2s",transition:"all 0.2s ease-in-out"},unselectedElement:{border:"","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""},selectButton:{background:"rgb(140,180,200)",width:"25%",marginRight:"10px",height:"100%",border:"none",color:"white","text-shadow":"0 -1px 0 rgba(0, 0, 0, 0.25)"},selectButton_selected:{border:"1px solid rgb(143,200,0)"},rightContainer:{padding:"10px","text-align":"center"},selectorDiv:{borderTop:"1px solid grey",height:"30px","background-color":"rgba(255,255,255,0.6)",cursor:"pointer"},selectorDiv_selected:{"background-color":"rgb(37,141,200)"},addButton:{background:"rgb(143,200,0)",width:"100%",height:"30px",border:"none",color:"white","text-shadow":"0 -1px 0 rgba(0, 0, 0, 0.25)"},deleteButton:{background:"rgb(200,73,20)",height:"100%",width:"20%",border:"none",color:"white","text-shadow":"0 -1px 0 rgba(0, 0, 0, 0.25)"},subsetSelect:{width:"100px"},variantSelect:{width:"100px"},sizeInput:{width:"100px"},selectorInput:{border:"none",marginRight:"30px",padding:"0",height:"100%",width:"100px"},fontNameSelect:{width:"150px"},fontProviderSelect:{width:"150px"}}},{}],7:[function(a,b){var c,d,e,f,g,h={},i=a("./controller"),j=a("./styles"),k=a("./webfonts");h.providerContainer=document.createElement("div"),h.createSelectorRow=function(b){var c=document.createElement("div"),e=document.createElement("input"),f=document.createElement("input"),g=document.createElement("button"),h=document.createElement("button"),k=b.id;$(c).attr("id",k+"_selectorDiv").css(j.selectorDiv).click(function(){i.selectorDivClick(k,c)}),$(e).attr("type","checkbox").attr("checked","true").click(function(){i.activeCheckClick(k,e)}),c.appendChild(e),$(h).html("Select").css(j.selectButton).click(function(){var b=a("./controller");b.selectButtonClick(k)}),c.appendChild(h),$(f).attr("id",k+"_selector").attr("class","selector").css(j.selectorInput).attr("placeholder","jQuery Selector").val(b.selector||"").change(function(){var b=a("./controller");b.selectorInputChange(k,h,this.value)}),c.appendChild(f),$(g).html("Delete").css(j.deleteButton).click(function(){i.deleteButtonClick(k,c)}),c.appendChild(g),d.appendChild(c)},h.selectElement=function(a){var b=$("body *").not("#fontmarkletDiv *");b.on("mouseover.fontmarklet",function(c){c.stopPropagation(),$(this).css(j.selectedElement),$(this).on("click.fontmarklet",function(c){c.preventDefault(),$(this).css(j.unselectedElement),b.off("click.fontmarklet"),b.off("mouseover.fontmarklet"),b.off("mouseout.fontmarklet"),a(this)})}),b.on("mouseout.fontmarklet",function(a){a.stopPropagation(),$(this).css(j.unselectedElement),$(this).off("click.fontmarklet")})},h.init=function(){var a,b;!function(a){a.fn.drags=function(b){var c;return b=a.extend({handle:"",cursor:"move"},b),c=""===b.handle?this:this.find(b.handle),c.css("cursor",b.cursor).on("mousedown",function(c){var d,e,f,g,h,i;d=""===b.handle?a(this).addClass("draggable"):a(this).addClass("active-handle").parent().addClass("draggable"),e=d.css("z-index"),f=d.outerHeight(),g=d.outerWidth(),h=d.offset().top+f-c.pageY,i=d.offset().left+g-c.pageX,d.css("z-index",1e3).parents().on("mousemove",function(b){a(".draggable").offset({top:b.pageY+h-f,left:b.pageX+i-g}).on("mouseup",function(){a(this).removeClass("draggable").css("z-index",e)})})}).on("mouseup",function(){""===b.handle?a(this).removeClass("draggable"):a(this).removeClass("active-handle").parent().removeClass("draggable")})}}($),c=document.createElement("div"),$(c).attr("id","fontmarkletDiv").css(j.mainContainer),d=document.createElement("div"),$(d).css(j.leftContainer),f=document.createElement("button"),$(f).attr("id","addFont").html("Add Selector").css(j.addButton).click(i.addButtonClick),d.appendChild(f),d.appendChild(document.createElement("br")),e=document.createElement("div"),$(e).css(j.rightContainer),g=document.createElement("select"),$(g).attr("class","selectProvider").css(j.fontProviderSelect).change(function(){var a=$(this).val();i.fontProviderSelectChange(a)});for(a in k.providers)k.providers.hasOwnProperty(a)&&(b=document.createElement("option"),b.value=a,b.innerHTML=a,g.appendChild(b));e.appendChild(g),e.appendChild(h.providerContainer),$(c).drags(),c.appendChild(d),c.appendChild(e),document.body.insertBefore(c,document.body.firstChild)},b.exports=h},{"./controller":2,"./styles":6,"./webfonts":8}],8:[function(a,b){var c,d,e={};e.providers={},e.fontConfigs={},e.idCounter=Math.round(1e5*Math.random()),e.loadRequirements=function(a){function b(b){b.ui.init(),b.ui.hide(),0===--d&&a()}var c,d=0;for(c in e.providers)e.providers.hasOwnProperty(c)&&e.providers[c].loadRequirements&&(d++,e.providers[c].loadRequirements(b))},e.loadWebFont=function(a,b){a.provider.loadWebFont(a,b)},e.setActiveProvider=function(a){d&&d.ui.hide(),d=e.providers[a],d.ui.show()},e.getActiveProvider=function(){return d},e.setActiveConfig=function(a){c=e.fontConfigs[a]},e.getActiveConfig=function(){return c},e.addFontConfig=function(){var a=e.idCounter++;return e.fontConfigs[a]=new d.FontConfiguration(a),e.setActiveConfig(a),e.fontConfigs[a]},e.deleteFontConfig=function(a){e.fontConfigs[a]=void 0},b.exports=e},{}]},{},[1,2,3,4,5,6,7,8]);